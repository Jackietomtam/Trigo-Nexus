# ğŸš€ Trigo Nexus éƒ¨ç½²æŒ‡å—

å°†ä½ çš„ AI äº¤æ˜“ç³»ç»Ÿéƒ¨ç½²åˆ°äº’è”ç½‘ï¼Œè®©å…¨ä¸–ç•Œéƒ½èƒ½è®¿é—®ï¼

---

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. æ£€æŸ¥å¿…è¦æ–‡ä»¶
ç¡®ä¿é¡¹ç›®åŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š
- âœ… `requirements.txt` - Python ä¾èµ–
- âœ… `Procfile` - éƒ¨ç½²é…ç½®
- âœ… `.gitignore` - å¿½ç•¥æ•æ„Ÿæ–‡ä»¶
- âœ… `env.example` - ç¯å¢ƒå˜é‡ç¤ºä¾‹

### 2. å‡†å¤‡ API å¯†é’¥
ä½ éœ€è¦ä»¥ä¸‹ API å¯†é’¥ï¼š
- **OpenRouter API Key** (ç”¨äº DeepSeek V3.2)
- **é˜¿é‡Œäº‘ç™¾ç‚¼ API Key** (ç”¨äº Qwen3 MAX)
- *(å¯é€‰)* Finnhub API Key

---

## ğŸ¯ æ¨èéƒ¨ç½²å¹³å°

### æ–¹æ¡ˆ 1: Railway â­â­â­â­â­ (æœ€æ¨è)
**ä¼˜ç‚¹**: å…è´¹é¢åº¦å……è¶³ï¼Œéƒ¨ç½²è¶…ç®€å•ï¼Œè‡ªåŠ¨ HTTPSï¼Œé€Ÿåº¦å¿«
**å…è´¹é¢åº¦**: æ¯æœˆ $5 å…è´¹é¢åº¦ + 500 å°æ—¶è¿è¡Œæ—¶é—´

#### éƒ¨ç½²æ­¥éª¤ï¼š

**1. åˆ›å»º GitHub ä»“åº“**
```bash
cd "/Users/sogmac/Desktop/Agent-Test/AIäº¤æ˜“"
git init
git add .
git commit -m "Initial commit"
```

**2. æ¨é€åˆ° GitHub**
- åœ¨ GitHub åˆ›å»ºæ–°ä»“åº“ï¼ˆå¯ä»¥æ˜¯ç§æœ‰ä»“åº“ï¼‰
- æŒ‰ç…§æç¤ºæ¨é€ä»£ç ï¼š
```bash
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/trigo-nexus.git
git branch -M main
git push -u origin main
```

**3. éƒ¨ç½²åˆ° Railway**
1. è®¿é—® [railway.app](https://railway.app)
2. ä½¿ç”¨ GitHub è´¦å·ç™»å½•
3. ç‚¹å‡» **"New Project"**
4. é€‰æ‹© **"Deploy from GitHub repo"**
5. é€‰æ‹©ä½ åˆšåˆ›å»ºçš„ä»“åº“
6. Railway ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶éƒ¨ç½²

**4. é…ç½®ç¯å¢ƒå˜é‡**
åœ¨ Railway é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ï¼š
```
OPENROUTER_API_KEY=sk-or-v1-ä½ çš„å¯†é’¥
DASHSCOPE_API_KEY=sk-ä½ çš„å¯†é’¥
FINNHUB_API_KEY=ä½ çš„å¯†é’¥
PORT=5001
```

**5. è®¿é—®ä½ çš„ç½‘ç«™**
- Railway ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªåŸŸåï¼Œå¦‚ï¼š`trigo-nexus.railway.app`
- ä½ ä¹Ÿå¯ä»¥ç»‘å®šè‡ªå·±çš„åŸŸå

---

### æ–¹æ¡ˆ 2: Render â­â­â­â­
**ä¼˜ç‚¹**: å®Œå…¨å…è´¹ï¼Œæ— éœ€ä¿¡ç”¨å¡ï¼Œè‡ªåŠ¨ HTTPS
**å…è´¹é¢åº¦**: 750 å°æ—¶/æœˆï¼Œ15 åˆ†é’Ÿæ— æ´»åŠ¨ä¼šä¼‘çœ 

#### éƒ¨ç½²æ­¥éª¤ï¼š

**1. åŒæ ·éœ€è¦ GitHub ä»“åº“**
ï¼ˆå‚è€ƒæ–¹æ¡ˆ 1 çš„ç¬¬ 1-2 æ­¥ï¼‰

**2. éƒ¨ç½²åˆ° Render**
1. è®¿é—® [render.com](https://render.com)
2. ä½¿ç”¨ GitHub ç™»å½•
3. ç‚¹å‡» **"New +"** â†’ **"Web Service"**
4. è¿æ¥ä½ çš„ GitHub ä»“åº“
5. å¡«å†™é…ç½®ï¼š
   - **Name**: trigo-nexus
   - **Environment**: Python 3
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `gunicorn --worker-class eventlet -w 1 app_v2:app --bind 0.0.0.0:$PORT`

**3. é…ç½®ç¯å¢ƒå˜é‡**
åœ¨ "Environment" æ ‡ç­¾æ·»åŠ ï¼š
```
OPENROUTER_API_KEY=sk-or-v1-ä½ çš„å¯†é’¥
DASHSCOPE_API_KEY=sk-ä½ çš„å¯†é’¥
FINNHUB_API_KEY=ä½ çš„å¯†é’¥
```

**4. éƒ¨ç½²å®Œæˆ**
- Render ä¼šç»™ä½ ä¸€ä¸ªåŸŸåï¼Œå¦‚ï¼š`trigo-nexus.onrender.com`
- é¦–æ¬¡è®¿é—®å¯èƒ½éœ€è¦ç­‰å¾… 30 ç§’ï¼ˆä»ä¼‘çœ å”¤é†’ï¼‰

---

### æ–¹æ¡ˆ 3: Heroku â­â­â­
**ä¼˜ç‚¹**: è€ç‰Œç¨³å®šï¼Œæ–‡æ¡£ä¸°å¯Œ
**ç¼ºç‚¹**: éœ€è¦ä¿¡ç”¨å¡éªŒè¯ï¼ˆå³ä½¿ä½¿ç”¨å…è´¹å¥—é¤ï¼‰

#### éƒ¨ç½²æ­¥éª¤ï¼š

**1. å®‰è£… Heroku CLI**
```bash
brew install heroku/brew/heroku
```

**2. ç™»å½•å¹¶åˆ›å»ºåº”ç”¨**
```bash
cd "/Users/sogmac/Desktop/Agent-Test/AIäº¤æ˜“"
heroku login
heroku create trigo-nexus
```

**3. é…ç½®ç¯å¢ƒå˜é‡**
```bash
heroku config:set OPENROUTER_API_KEY=sk-or-v1-ä½ çš„å¯†é’¥
heroku config:set DASHSCOPE_API_KEY=sk-ä½ çš„å¯†é’¥
heroku config:set FINNHUB_API_KEY=ä½ çš„å¯†é’¥
```

**4. éƒ¨ç½²**
```bash
git push heroku main
```

**5. æ‰“å¼€åº”ç”¨**
```bash
heroku open
```

---

### æ–¹æ¡ˆ 4: è‡ªå·±çš„ VPS (é«˜çº§ç”¨æˆ·) â­â­â­â­â­
**ä¼˜ç‚¹**: å®Œå…¨æ§åˆ¶ï¼Œæ€§èƒ½æœ€å¥½ï¼Œæ— é™åˆ¶
**é€‚åˆ**: æœ‰æœåŠ¡å™¨ç»éªŒçš„ç”¨æˆ·

#### æ¨èæœåŠ¡å•†ï¼š
- **Vultr**: $5/æœˆèµ·
- **DigitalOcean**: $4/æœˆèµ·
- **é˜¿é‡Œäº‘**: å­¦ç”Ÿæœº 9.9 å…ƒ/æœˆ

#### éƒ¨ç½²æ­¥éª¤ï¼ˆUbuntu æœåŠ¡å™¨ï¼‰ï¼š

**1. è¿æ¥æœåŠ¡å™¨**
```bash
ssh root@ä½ çš„æœåŠ¡å™¨IP
```

**2. å®‰è£…ä¾èµ–**
```bash
apt update
apt install -y python3 python3-pip git nginx
```

**3. å…‹éš†ä»£ç **
```bash
cd /opt
git clone https://github.com/ä½ çš„ç”¨æˆ·å/trigo-nexus.git
cd trigo-nexus
pip3 install -r requirements.txt
```

**4. é…ç½®ç¯å¢ƒå˜é‡**
```bash
nano .env
```
æ·»åŠ ï¼š
```
OPENROUTER_API_KEY=sk-or-v1-ä½ çš„å¯†é’¥
DASHSCOPE_API_KEY=sk-ä½ çš„å¯†é’¥
FINNHUB_API_KEY=ä½ çš„å¯†é’¥
```

**5. ä½¿ç”¨ Systemd ç®¡ç†æœåŠ¡**
åˆ›å»º `/etc/systemd/system/trigo-nexus.service`ï¼š
```ini
[Unit]
Description=Trigo Nexus AI Trading
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/opt/trigo-nexus
Environment="PATH=/usr/bin"
ExecStart=/usr/bin/python3 app_v2.py
Restart=always

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š
```bash
systemctl daemon-reload
systemctl start trigo-nexus
systemctl enable trigo-nexus
```

**6. é…ç½® Nginx åå‘ä»£ç†**
åˆ›å»º `/etc/nginx/sites-available/trigo-nexus`ï¼š
```nginx
server {
    listen 80;
    server_name ä½ çš„åŸŸå.com;

    location / {
        proxy_pass http://127.0.0.1:5001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    location /socket.io {
        proxy_pass http://127.0.0.1:5001/socket.io;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

å¯ç”¨ç«™ç‚¹ï¼š
```bash
ln -s /etc/nginx/sites-available/trigo-nexus /etc/nginx/sites-enabled/
nginx -t
systemctl reload nginx
```

**7. é…ç½® HTTPS (Let's Encrypt)**
```bash
apt install -y certbot python3-certbot-nginx
certbot --nginx -d ä½ çš„åŸŸå.com
```

---

## ğŸ”’ å®‰å…¨å»ºè®®

### 1. ä¿æŠ¤ API å¯†é’¥
- âœ… **æ°¸è¿œä¸è¦**æŠŠ API å¯†é’¥ç›´æ¥æäº¤åˆ° GitHub
- âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- âœ… `.gitignore` å·²é…ç½®å¿½ç•¥ `.env` æ–‡ä»¶

### 2. å¦‚æœä¸å°å¿ƒæ³„éœ²äº†å¯†é’¥
1. **ç«‹å³**åœ¨å¯¹åº”å¹³å°é‡æ–°ç”Ÿæˆæ–°å¯†é’¥
2. åˆ é™¤ Git å†å²ä¸­çš„æ•æ„Ÿä¿¡æ¯ï¼š
```bash
git filter-branch --force --index-filter \
  "git rm --cached --ignore-unmatch config.py" \
  --prune-empty --tag-name-filter cat -- --all
```

### 3. æ·»åŠ è®¿é—®é™åˆ¶ï¼ˆå¯é€‰ï¼‰
å¦‚æœä¸æƒ³å…¬å¼€è®¿é—®ï¼Œå¯ä»¥æ·»åŠ ç®€å•çš„å¯†ç ä¿æŠ¤ã€‚

---

## ğŸ“Š éƒ¨ç½²åæ£€æŸ¥æ¸…å•

- [ ] ç½‘ç«™å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] AI æ¨¡å‹å¡ç‰‡æ˜¾ç¤ºæ­£å¸¸
- [ ] ä»·æ ¼æ•°æ®å®æ—¶æ›´æ–°
- [ ] å›¾è¡¨æ­£å¸¸æ¸²æŸ“
- [ ] AI å¯ä»¥æ­£å¸¸è¿›è¡Œäº¤æ˜“å†³ç­–
- [ ] WebSocket è¿æ¥æ­£å¸¸ï¼ˆæŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ï¼‰
- [ ] æ²¡æœ‰ API å¯†é’¥æŠ¥é”™

---

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜ 1: éƒ¨ç½²åç½‘ç«™æ‰“ä¸å¼€
**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥æ—¥å¿—ï¼ˆRailway/Render éƒ½æœ‰æ—¥å¿—åŠŸèƒ½ï¼‰
2. ç¡®è®¤ç«¯å£é…ç½®æ­£ç¡®ï¼ˆä½¿ç”¨ `$PORT` ç¯å¢ƒå˜é‡ï¼‰
3. ç¡®è®¤ `host='0.0.0.0'` è€Œä¸æ˜¯ `127.0.0.1`

### é—®é¢˜ 2: AI ä¸å·¥ä½œï¼Œæ˜¾ç¤º API é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®é…ç½®
2. ç¡®è®¤ API å¯†é’¥æœ‰æ•ˆ
3. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—

### é—®é¢˜ 3: WebSocket è¿æ¥å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®ä¿ä½¿ç”¨ `eventlet` worker: `gunicorn --worker-class eventlet`
2. æ£€æŸ¥ Nginx é…ç½®ï¼ˆå¦‚æœä½¿ç”¨ VPSï¼‰
3. ç¡®è®¤å¹³å°æ”¯æŒ WebSocketï¼ˆRailway å’Œ Render éƒ½æ”¯æŒï¼‰

### é—®é¢˜ 4: éƒ¨ç½²åæ€§èƒ½å·®
**è§£å†³æ–¹æ¡ˆ**:
1. Railway/Render å…è´¹ç‰ˆæ€§èƒ½æœ‰é™ï¼Œè€ƒè™‘å‡çº§
2. ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢ï¼ˆå¦‚æœä½¿ç”¨æ•°æ®åº“ï¼‰
3. è€ƒè™‘ä½¿ç”¨ VPS

---

## ğŸ’° æˆæœ¬å¯¹æ¯”

| å¹³å° | å…è´¹é¢åº¦ | ä»˜è´¹ä»·æ ¼ | æ¨èæŒ‡æ•° |
|------|---------|---------|---------|
| **Railway** | $5/æœˆ + 500å°æ—¶ | $5 èµ·æ­¥ | â­â­â­â­â­ |
| **Render** | 750å°æ—¶/æœˆ | $7/æœˆèµ· | â­â­â­â­ |
| **Heroku** | éœ€ä¿¡ç”¨å¡ | $7/æœˆèµ· | â­â­â­ |
| **Vultr VPS** | æ—  | $5/æœˆèµ· | â­â­â­â­â­ |

---

## ğŸŒ ç»‘å®šè‡ªå®šä¹‰åŸŸå

### Railway / Render
1. åœ¨å¹³å°è®¾ç½®ä¸­æ·»åŠ è‡ªå®šä¹‰åŸŸå
2. åœ¨åŸŸåæœåŠ¡å•†æ·»åŠ  CNAME è®°å½•ï¼š
   ```
   CNAME  @  ä½ çš„åº”ç”¨åŸŸå
   ```

### Heroku
```bash
heroku domains:add www.ä½ çš„åŸŸå.com
```

### VPS
ç›´æ¥åœ¨ Nginx é…ç½®ä¸­ä¿®æ”¹ `server_name`

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹å¹³å°å®˜æ–¹æ–‡æ¡£
2. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—
3. åœ¨ GitHub æ Issue

---

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼ğŸ‰**

ä½ çš„ AI äº¤æ˜“ç³»ç»Ÿå³å°†ä¸Šçº¿ï¼Œå‘å…¨ä¸–ç•Œå±•ç¤ºä½ çš„æˆæœï¼

